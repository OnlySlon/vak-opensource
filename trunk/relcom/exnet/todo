Инструкция по серверу "trade@kiae.su" Электронной Биржи ExNet
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Сервер предназначен для проведения сделок брокерами ExNet на базе
аппаратно-программых возможностей телекоммуникационной сети Relcom.

Программное обеспечение сервера разработано в Информационно-
Вычислительном Центре института Атомной Энергии им. И.В.Курчатова.

Сервер имеет четыре режима работы:
1) Режим торгов (market).
2) Режим администратора торгов (adm).
3) Информационный режим (info).
4) Информационный режим администратора (infoadm).

Режимы отлачаются по правам доступа.  Каждый режим имеет
отдельный список допущенных.

Режимы переключаются командой MODE с параметром - названием режима.
Кроме этого, сервер имеет набор почтовых адресов, которые обеспечивают
работу в соответствующих режимах:
1) Режим торгов                         - trade@
2) Режим администратора торгов          - trade-adm@
3) Информационный режим                 - trade-info@
4) Информационный режим администратора  - trade-infoadm@

Команда HELP выдает краткое описание работы сервера в текущем
режиме.

Перечень команд сервера:
~~~~~~~~~~~~~~~~~~~~~~~~
HELP                            - Выдать файл helpfile
MODE режим                      - Перейти в другой режим
INDEX [шаблон...]               - Выдать список лотов
LONGINDEX [шаблон...]           - Выдать список лотов с описанием
NEWINDEX время [шаблон...]      - Выдать список новых лотов
LONGNEWINDEX время [шаблон...]  - Выдать список новых лотов с описанием
ADD лот                         - Подписаться на лот
ADD адрес лот                   - Подписать указанный адрес
DELETE лот                      - Отменить подписку на лот
CREATE лот вр1 вр2 описание     - Создать лот
DESTROY лот...                  - Уничтожить лот
SEND лот                        - Послать сообщение по лоту
GET лот                         - Взять архив переписки по лоту
SUBJECT строка                  - Установить поле Subject: в ответе
ERRORSUBJECT строка             - Установить Subject: в случае ошибки
QUIT                            - Конец потока команд

Названия команд можно задавать и прописными буквами, здесь строчные
буквы использовани исключительно в целях наглядности.

Параметр "время" в командах NEWINDEX, LONGNEWINDEX и CREATE имеет
формат ДД.ММ.ГГ/ЧЧ.ММ.СС (день, месяц, год, часы, минуты, секунды).
Время московское.

Ограничения:
~~~~~~~~~~~~
1) Доступ к серверу имеют только те, чьи адреса (шаблоны) содержатся в
файле users.
2) Команды GET и DESTROY может выполнять только тот, кто создал этот лот.
3) Команда SEND для подписчиков работает только в период активности лота
(от T1 до T2).  Для создателя лота работает всегда.

За командами CREATE и SEND следует текст письма, заканчивающийся строкой,
содерщащей символ '%' в первой позиции.  Например:

	send abracadabra
	Текст письма,
	может занимать произвольное количество
	строчек.
	%

Режим администратора (adm)
~~~~~~~~~~~~~~~~~~~~~~~~~~
Режим администратора позволяет просматривать список лотов,
находящихся в архиве (уничтоженных командой DESTROY), и
затребовать содержимое нужных архивов.

В режиме администратора выполняются команды:

HELP                            - Выдать файл helpfile
MODE режим                      - Перейти в другой режим
INDEX [шаблон...]               - Выдать список лотов
LONGINDEX [шаблон...]           - Выдать список лотов с описанием
NEWINDEX время [шаблон...]      - Выдать список новых лотов
LONGNEWINDEX время [шаблон...]  - Выдать список новых лотов с описанием
GET лот                         - Взять архив переписки по лоту
SUBJECT строка                  - Установить поле Subject: в ответе
ERRORSUBJECT строка             - Установить Subject: в случае ошибки
QUIT                            - Конец потока команд


Информационный режим (info)
~~~~~~~~~~~~~~~~~~~~~~~~~~~
В информационном режиме можно просмотреть список информационных
лотов (тем), и подписаться на них.

В информационном режиме выполняются команды:

HELP                            - Выдать файл helpfile
MODE режим                      - Перейти в другой режим
INDEX [шаблон...]               - Выдать список лотов
LONGINDEX [шаблон...]           - Выдать список лотов с описанием
NEWINDEX время [шаблон...]      - Выдать список новых лотов
LONGNEWINDEX время [шаблон...]  - Выдать список новых лотов с описанием
ADD лот                         - Подписаться на лот
DELETE лот                      - Отменить подписку на лот
LIST лот                        - Выдать историю переписки по лоту
GET лот [номер...]              - Взять архив переписки по лоту
SUBJECT строка                  - Установить поле Subject: в ответе
ERRORSUBJECT строка             - Установить Subject: в случае ошибки
QUIT                            - Конец потока команд


Информационный режим администратора (infoadm)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Информационный режим администратора предназначен для
создания инфо-лотов и рассылки информации по ним.

В информационном режиме администратора выполняются команды:

HELP                            - Выдать файл helpfile
MODE режим                      - Перейти в другой режим
INDEX [шаблон...]               - Выдать список лотов
LONGINDEX [шаблон...]           - Выдать список лотов с описанием
NEWINDEX время [шаблон...]      - Выдать список новых лотов
LONGNEWINDEX время [шаблон...]  - Выдать список новых лотов с описанием
ADD лот                         - Подписаться на лот
ADD адрес лот                   - Подписать указанный адрес
DELETE лот                      - Отменить подписку на лот
DELETE адрес лот                - Отменить подписку адресата на лот
CREATE лот описание             - Создать лот
DESTROY лот...                  - Уничтожить лот
SEND лот                        - Послать сообщение по лоту
GET лот                         - Взять архив переписки по лоту
SUBJECT строка                  - Установить поле Subject: в ответе
ERRORSUBJECT строка             - Установить Subject: в случае ошибки
QUIT                            - Конец потока команд


По вопросам работы сервера просьба обращаться к Сергею Вакуленко,
телефон (095) 196-90-06, э-почта <vak@kiae.su>.
